2022/10/21 18:04:47.307 lib.rs:542: [WARN] environment variable `TZ` is missing, using `/etc/localtime`
2022/10/21 18:04:47.307 thread.rs:396: [DEBG] tid 2563 thread name is backtrace-loader
2022/10/21 18:04:47.307 lib.rs:554: [INFO] environment variable is present, http_proxy: http://127.0.0.1:6152
2022/10/21 18:04:47.308 lib.rs:554: [INFO] environment variable is present, https_proxy: http://127.0.0.1:6152
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.309 runner.rs:40: [DEBG] case start, name: cases::test_witness::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.310 thread.rs:396: [DEBG] tid 4355 thread name is timer::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.322 mod.rs:126: [INFO] encryption: none of key dictionary and file dictionary are found.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.322 mod.rs:509: [INFO] encryption is disabled.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.323 config.rs:267: [WARN] Memory allocator nodump is not supported, continue with default allocator
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:47.323 thread.rs:396: [DEBG] tid 3691 thread name is sst-recovery::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.324 pipe_builder.rs:105: [INFO] Create raft log directory: /private/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterltU0yS/raft-engine
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.326 engine.rs:91: [INFO] Recovering raft logs takes 1.841375ms
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.327 config.rs:679: [WARN] compaction guard is disabled due to region info provider not available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.327 config.rs:794: [WARN] compaction guard is disabled due to region info provider not available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.710 mod.rs:126: [INFO] encryption: none of key dictionary and file dictionary are found.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.710 mod.rs:509: [INFO] encryption is disabled.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.710 config.rs:267: [WARN] Memory allocator nodump is not supported, continue with default allocator
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:47.710 thread.rs:396: [DEBG] tid 6167 thread name is sst-recovery::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.710 pipe_builder.rs:105: [INFO] Create raft log directory: /private/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusteretMyp8/raft-engine
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.711 engine.rs:91: [INFO] Recovering raft logs takes 600.291Âµs
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.711 config.rs:679: [WARN] compaction guard is disabled due to region info provider not available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:47.711 config.rs:794: [WARN] compaction guard is disabled due to region info provider not available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.097 mod.rs:126: [INFO] encryption: none of key dictionary and file dictionary are found.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.097 mod.rs:509: [INFO] encryption is disabled.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.098 config.rs:267: [WARN] Memory allocator nodump is not supported, continue with default allocator
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.098 thread.rs:396: [DEBG] tid 6439 thread name is sst-recovery::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.099 pipe_builder.rs:105: [INFO] Create raft log directory: /private/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterk1yyR3/raft-engine
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.100 engine.rs:91: [INFO] Recovering raft logs takes 1.257083ms
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.100 config.rs:679: [WARN] compaction guard is disabled due to region info provider not available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.100 config.rs:794: [WARN] compaction guard is disabled due to region info provider not available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.607 cluster.rs:338: [DEBG] starting node 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.609 cluster.rs:359: [DEBG] calling run node, node_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.610 config.rs:480: [WARN] Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.610 thread.rs:396: [DEBG] tid 9499 thread name is test-pd-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.610 thread.rs:396: [DEBG] tid 9843 thread name is background::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-1 2022/10/21 18:04:48.611 thread.rs:396: [DEBG] tid 9227 thread name is background::test_request_snapshot_before_leader_finish_apply_conf_change-1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.617 thread.rs:396: [DEBG] tid 6915 thread name is mock-collector-reg-handle::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.617 node.rs:236: [INFO] trying to bootstrap cluster, region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.650 node.rs:245: [INFO] put store to PD, store: id: 1 address: "127.0.0.1:0" version: "6.4.0-alpha" peer_address: "127.0.0.1:0" status_address: "127.0.0.1:20180" git_hash: "Unknown git hash" start_timestamp: 1666346688 deploy_path: "/Users/ethercflow/workspace/tikv/target/debug/deps"
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.650 node.rs:382: [INFO] initializing replication mode, store_id: 1, status: None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.651 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.651 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.652 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.652 node.rs:514: [INFO] start raft store thread, store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.653 thread.rs:396: [DEBG] tid 8963 thread name is purge-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.654 snap.rs:1398: [INFO] Initializing SnapManager, encryption is enabled: false
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.656 peer.rs:263: [INFO] create peer, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.656 peer_storage.rs:299: [DEBG] creating storage on specified path, path: "/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterltU0yS/db", peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.657 thread.rs:396: [DEBG] tid 8707 thread name is cleanup-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.657 thread.rs:396: [DEBG] tid 7427 thread name is refreash-config-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.657 thread.rs:396: [DEBG] tid 8451 thread name is region-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.658 thread.rs:396: [DEBG] tid 7171 thread name is raftlog-fetch-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.659 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.659 raft.rs:2789: [DEBG] reset election timeout 0 -> 36 at 0, election_elapsed: 0, timeout: 36, prev_timeout: 0, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.659 raft.rs:1120: [INFO] became follower at term 5, term: 5, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.659 raft.rs:384: [INFO] newRaft, peers: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, last term: 5, last index: 5, applied: 5, commit: 5, term: 5, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.660 raw_node.rs:315: [INFO] RawNode created with id 1., id: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.660 peer.rs:1230: [DEBG] init commit group, peer_id: 1, region_id: 1, state: GlobalReplicationState { status: , group: StoreGroup { labels: {1: [], 2: [], 3: []}, label_ids: {}, stores: {}, label_key: "", version: 0, dirty: false }, group_buffer: [] }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.661 store.rs:1217: [INFO] start store, takes: 5.429209ms, merge_count: 0, applying_count: 0, tombstone_count: 0, region_count: 1, store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.662 store.rs:1271: [INFO] cleans up garbage data, takes: 524.375Âµs, garbage_range_count: 2, store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.665 thread.rs:396: [DEBG] tid 7683 thread name is steady-timer::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.665 thread.rs:396: [DEBG] tid 10755 thread name is raftstore-1-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.666 thread.rs:396: [DEBG] tid 21507 thread name is raftstore-1-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.667 thread.rs:396: [DEBG] tid 21251 thread name is apply-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.667 thread.rs:396: [DEBG] tid 20995 thread name is apply-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.667 pool.rs:123: [DEBG] scheduling task CollectorReg
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.668 collector_reg.rs:58: [WARN] failed to register collector, err: channel has been closed
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.668 thread.rs:396: [DEBG] tid 20739 thread name is stats-monitor::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.669 node.rs:350: [DEBG] node_id: 1 tmp: Some("/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterRk6siB")
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.669 config.rs:480: [WARN] Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.669 cluster.rs:364: [DEBG] node 1 started
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.669 cluster.rs:338: [DEBG] starting node 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.669 cluster.rs:359: [DEBG] calling run node, node_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.669 config.rs:480: [WARN] Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.669 thread.rs:396: [DEBG] tid 20483 thread name is test-pd-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.669 thread.rs:396: [DEBG] tid 11011 thread name is background::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-1 2022/10/21 18:04:48.669 thread.rs:396: [DEBG] tid 20227 thread name is background::test_request_snapshot_before_leader_finish_apply_conf_change-1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.670 thread.rs:396: [DEBG] tid 19971 thread name is mock-collector-reg-handle::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.671 node.rs:236: [INFO] trying to bootstrap cluster, region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.702 node.rs:245: [INFO] put store to PD, store: id: 2 address: "127.0.0.1:0" version: "6.4.0-alpha" peer_address: "127.0.0.1:0" status_address: "127.0.0.1:20180" git_hash: "Unknown git hash" start_timestamp: 1666346688 deploy_path: "/Users/ethercflow/workspace/tikv/target/debug/deps"
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.702 node.rs:382: [INFO] initializing replication mode, store_id: 2, status: None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.702 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.702 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.702 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.702 node.rs:514: [INFO] start raft store thread, store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.703 thread.rs:396: [DEBG] tid 19459 thread name is purge-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.703 thread.rs:396: [DEBG] tid 19203 thread name is cleanup-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.703 thread.rs:396: [DEBG] tid 18691 thread name is raftlog-fetch-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.703 thread.rs:396: [DEBG] tid 18947 thread name is region-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.703 snap.rs:1398: [INFO] Initializing SnapManager, encryption is enabled: false
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.703 thread.rs:396: [DEBG] tid 18435 thread name is refreash-config-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.704 peer.rs:263: [INFO] create peer, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.704 peer_storage.rs:299: [DEBG] creating storage on specified path, path: "/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusteretMyp8/db", peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.704 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.704 raft.rs:2789: [DEBG] reset election timeout 0 -> 47 at 0, election_elapsed: 0, timeout: 47, prev_timeout: 0, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.704 raft.rs:1120: [INFO] became follower at term 5, term: 5, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.704 raft.rs:384: [INFO] newRaft, peers: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, last term: 5, last index: 5, applied: 5, commit: 5, term: 5, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.705 raw_node.rs:315: [INFO] RawNode created with id 2., id: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.705 peer.rs:1230: [DEBG] init commit group, peer_id: 2, region_id: 1, state: GlobalReplicationState { status: , group: StoreGroup { labels: {1: [], 2: [], 3: []}, label_ids: {}, stores: {}, label_key: "", version: 0, dirty: false }, group_buffer: [] }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.705 store.rs:1217: [INFO] start store, takes: 1.562667ms, merge_count: 0, applying_count: 0, tombstone_count: 0, region_count: 1, store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.705 store.rs:1271: [INFO] cleans up garbage data, takes: 26.334Âµs, garbage_range_count: 2, store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 thread.rs:396: [DEBG] tid 11779 thread name is raftstore-2-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 thread.rs:396: [DEBG] tid 17923 thread name is raftstore-2-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 pool.rs:123: [DEBG] scheduling task CollectorReg
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 collector_reg.rs:58: [WARN] failed to register collector, err: channel has been closed
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 thread.rs:396: [DEBG] tid 12035 thread name is apply-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 node.rs:350: [DEBG] node_id: 2 tmp: Some("/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterknoTpe")
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.706 config.rs:480: [WARN] Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.707 thread.rs:396: [DEBG] tid 17411 thread name is stats-monitor::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.707 thread.rs:396: [DEBG] tid 17667 thread name is apply-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.707 cluster.rs:364: [DEBG] node 2 started
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.707 cluster.rs:338: [DEBG] starting node 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.707 cluster.rs:359: [DEBG] calling run node, node_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.707 config.rs:480: [WARN] Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.707 thread.rs:396: [DEBG] tid 17155 thread name is test-pd-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.707 thread.rs:396: [DEBG] tid 12291 thread name is background::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-1 2022/10/21 18:04:48.707 thread.rs:396: [DEBG] tid 12547 thread name is background::test_request_snapshot_before_leader_finish_apply_conf_change-1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.708 thread.rs:396: [DEBG] tid 12803 thread name is mock-collector-reg-handle::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.708 node.rs:236: [INFO] trying to bootstrap cluster, region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.738 node.rs:245: [INFO] put store to PD, store: id: 3 address: "127.0.0.1:0" version: "6.4.0-alpha" peer_address: "127.0.0.1:0" status_address: "127.0.0.1:20180" git_hash: "Unknown git hash" start_timestamp: 1666346688 deploy_path: "/Users/ethercflow/workspace/tikv/target/debug/deps"
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.738 node.rs:382: [INFO] initializing replication mode, store_id: 3, status: None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.738 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.738 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.739 replication_mode.rs:55: [INFO] associated store labels, labels: [], store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.739 node.rs:514: [INFO] start raft store thread, store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.739 thread.rs:396: [DEBG] tid 16899 thread name is purge-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.739 thread.rs:396: [DEBG] tid 13059 thread name is region-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.739 thread.rs:396: [DEBG] tid 13315 thread name is raftlog-fetch-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.739 thread.rs:396: [DEBG] tid 16643 thread name is cleanup-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.739 snap.rs:1398: [INFO] Initializing SnapManager, encryption is enabled: false
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:48.740 thread.rs:396: [DEBG] tid 13571 thread name is refreash-config-worker::test_request_snapshot_before_leader_finish_apply_conf_change-0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.740 peer.rs:263: [INFO] create peer, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.740 peer_storage.rs:299: [DEBG] creating storage on specified path, path: "/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterk1yyR3/db", peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.740 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.740 raft.rs:2789: [DEBG] reset election timeout 0 -> 39 at 0, election_elapsed: 0, timeout: 39, prev_timeout: 0, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.741 raft.rs:1120: [INFO] became follower at term 5, term: 5, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.741 raft.rs:384: [INFO] newRaft, peers: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, last term: 5, last index: 5, applied: 5, commit: 5, term: 5, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.741 raw_node.rs:315: [INFO] RawNode created with id 3., id: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.741 peer.rs:1230: [DEBG] init commit group, peer_id: 3, region_id: 1, state: GlobalReplicationState { status: , group: StoreGroup { labels: {1: [], 2: [], 3: []}, label_ids: {}, stores: {}, label_key: "", version: 0, dirty: false }, group_buffer: [] }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.741 store.rs:1217: [INFO] start store, takes: 1.580125ms, merge_count: 0, applying_count: 0, tombstone_count: 0, region_count: 1, store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.742 store.rs:1271: [INFO] cleans up garbage data, takes: 20.833Âµs, garbage_range_count: 2, store_id: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.742 thread.rs:396: [DEBG] tid 15875 thread name is raftstore-3-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 thread.rs:396: [DEBG] tid 13827 thread name is raftstore-3-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 pool.rs:123: [DEBG] scheduling task CollectorReg
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 thread.rs:396: [DEBG] tid 15363 thread name is apply-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 collector_reg.rs:58: [WARN] failed to register collector, err: channel has been closed
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 thread.rs:396: [DEBG] tid 15619 thread name is apply-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 node.rs:350: [DEBG] node_id: 3 tmp: Some("/var/folders/gq/v0f76rc545n2mrprck4_bh_m0000gn/T/test_clusterlpLp66")
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 config.rs:480: [WARN] Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 thread.rs:396: [DEBG] tid 15107 thread name is stats-monitor::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.743 cluster.rs:364: [DEBG] node 3 started
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.758 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.771 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.784 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.796 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.810 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.822 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.835 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.849 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.861 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.874 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.887 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.899 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.910 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.924 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.935 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.949 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.962 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.975 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:48.988 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.000 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.013 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.025 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.039 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.051 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.063 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.076 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.089 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.101 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.109 raft.rs:1550: [INFO] starting a new election, term: 5, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.109 raft.rs:1170: [INFO] became pre-candidate at term 5, term: 5, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.110 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgRequestPreVote to: 2 term: 6 log_term: 5 index: 5 commit: 5 commit_term: 5, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.110 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgRequestPreVote to: 3 term: 6 log_term: 5 index: 5 commit: 5 commit_term: 5, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.111 raft.rs:1299: [INFO] broadcasting vote request, to: [2, 3], log_index: 5, log_term: 5, term: 5, type: MsgRequestPreVote, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.111 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.111 peer.rs:2415: [DEBG] update leader info, peer_id: 1, term: 5, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.112 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 18, msg_type: MsgRequestPreVote, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.113 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgRequestPreVote, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.113 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 18, msg_type: MsgRequestPreVote, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.113 raft.rs:1565: [INFO] [logterm: 5, index: 5, vote: 0] cast vote for 1 [logterm: 5, index: 5] at term 5, msg type: MsgRequestPreVote, term: 5, msg_index: 5, msg_term: 5, from: 1, vote: 0, log_index: 5, log_term: 5, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.114 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgRequestPreVoteResponse to: 1 term: 6, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.114 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 4
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.114 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgRequestPreVote, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.114 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.114 raft.rs:1565: [INFO] [logterm: 5, index: 5, vote: 0] cast vote for 1 [logterm: 5, index: 5] at term 5, msg type: MsgRequestPreVote, term: 5, msg_index: 5, msg_term: 5, from: 1, vote: 0, log_index: 5, log_term: 5, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.115 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgRequestPreVoteResponse to: 1 term: 6, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.115 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgRequestPreVoteResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.115 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.115 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgRequestPreVoteResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.115 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.116 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgRequestPreVoteResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.116 raft.rs:2212: [INFO] received votes response, term: 5, type: MsgRequestPreVoteResponse, approvals: 2, rejections: 0, from: 2, vote: true, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.116 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.116 raft.rs:2789: [DEBG] reset election timeout 36 -> 25 at 0, election_elapsed: 0, timeout: 25, prev_timeout: 36, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.116 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.116 raft.rs:1144: [INFO] became candidate at term 6, term: 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.117 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgRequestVote to: 2 term: 6 log_term: 5 index: 5 commit: 5 commit_term: 5, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.117 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgRequestVote to: 3 term: 6 log_term: 5 index: 5 commit: 5 commit_term: 5, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.117 raft.rs:1299: [INFO] broadcasting vote request, to: [2, 3], log_index: 5, log_term: 5, term: 6, type: MsgRequestVote, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.117 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.117 peer.rs:2415: [DEBG] update leader info, peer_id: 1, term: 6, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.119 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 18, msg_type: MsgRequestVote, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.119 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 3, msg_size: 18, msg_type: MsgRequestVote, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.119 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgRequestVote, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.119 raft.rs:1364: [INFO] received a message with higher term from 1, msg type: MsgRequestVote, message_term: 6, term: 5, from: 1, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.119 write.rs:813: [WARN] [store 1] async write too slow, write_kv: 0s, write_raft: 0.001141791s, send: 0.0003435s, callback: 0s thread: sync-writer, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 4
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgRequestPreVoteResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgRequestVote, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 raft.rs:1364: [INFO] received a message with higher term from 1, msg type: MsgRequestVote, message_term: 6, term: 5, from: 1, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 raft.rs:2789: [DEBG] reset election timeout 47 -> 30 at 33, election_elapsed: 33, timeout: 30, prev_timeout: 47, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 raft.rs:1120: [INFO] became follower at term 6, term: 6, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.120 raft.rs:1565: [INFO] [logterm: 5, index: 5, vote: 0] cast vote for 1 [logterm: 5, index: 5] at term 6, msg type: MsgRequestVote, term: 6, msg_index: 5, msg_term: 5, from: 1, vote: 0, log_index: 5, log_term: 5, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgRequestVoteResponse to: 1 term: 6, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 peer.rs:2415: [DEBG] update leader info, peer_id: 2, term: 6, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 raft.rs:2789: [DEBG] reset election timeout 39 -> 37 at 30, election_elapsed: 30, timeout: 37, prev_timeout: 39, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 raft.rs:1120: [INFO] became follower at term 6, term: 6, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 raft.rs:1565: [INFO] [logterm: 5, index: 5, vote: 0] cast vote for 1 [logterm: 5, index: 5] at term 6, msg type: MsgRequestVote, term: 6, msg_index: 5, msg_term: 5, from: 1, vote: 0, log_index: 5, log_term: 5, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgRequestVoteResponse to: 1 term: 6, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.121 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 peer.rs:2415: [DEBG] update leader info, peer_id: 3, term: 6, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgRequestVoteResponse, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgRequestVoteResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgRequestVoteResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 raft.rs:2212: [INFO] received votes response, term: 6, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 2, vote: true, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.122 raft.rs:2789: [DEBG] reset election timeout 25 -> 35 at 0, election_elapsed: 0, timeout: 35, prev_timeout: 25, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 raft.rs:1228: [INFO] became leader at term 6, term: 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppend to: 2 log_term: 5 index: 5 entries { term: 6 index: 6 } commit: 5, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgAppend to: 3 log_term: 5 index: 5 entries { term: 6 index: 6 } commit: 5, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 peer.rs:3657: [DEBG] update read progress, progress: Term(6), peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 peer.rs:3657: [DEBG] update read progress, progress: LeaderLease(RemoteLease { expired_time: Timespec { sec: 1766142, nsec: 223346688 }, term: 6 }), peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.123 peer.rs:2292: [DEBG] becomes leader with lease, lease: Lease { valid: Timespec { sec: 1766142, nsec: 224275583 } }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 peer.rs:5636: [INFO] require updating max ts, initial_status: 25769803778, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 pool.rs:123: [DEBG] scheduling task update the max timestamp for region 1 in the concurrency manager
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 peer.rs:2415: [DEBG] update leader info, peer_id: 1, term: 6, leader_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.124 pd.rs:1815: [DEBG] executing task, task: update the max timestamp for region 1 in the concurrency manager
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 20, msg_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 20, msg_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.124 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.125 pd.rs:1656: [INFO] succeed to update max timestamp, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppendResponse to: 1 index: 6 commit: 5, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgAppendResponse to: 1 index: 6 commit: 5, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 peer.rs:2137: [DEBG] peer start pending, time: Instant { t: 42387407663063 }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 peer.rs:2415: [DEBG] update leader info, peer_id: 2, term: 6, leader_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 peer.rs:2137: [DEBG] peer start pending, time: Instant { t: 42387407667725 }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 peer.rs:2415: [DEBG] update leader info, peer_id: 3, term: 6, leader_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.125 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 1, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.126 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 1, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 raft_log.rs:536: [DEBG] persisted index 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 raft_log.rs:536: [DEBG] persisted index 6, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 1 entries, 2 messages and 0 snapshots, takes: 4
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 raft_log.rs:536: [DEBG] persisted index 6, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.126 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgRequestVoteResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 raft_log.rs:500: [DEBG] committing index 6, index: 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppend to: 2 log_term: 6 index: 6 commit: 6, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 peer.rs:2186: [DEBG] peer has caught up logs, takes: 0.002068833, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 1, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.127 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 1, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgAppend to: 3 log_term: 6 index: 6 commit: 6, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.127 peer.rs:2186: [DEBG] peer has caught up logs, takes: 0.00236925, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 1, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.128 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 1, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 14, msg_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 14, msg_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppendResponse to: 1 index: 6 commit: 6, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.128 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgAppendResponse to: 1 index: 6 commit: 6, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 apply.rs:696: [WARN] [store 2] handle ready 1 committed entries, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 apply.rs:696: [WARN] [store 3] handle ready 1 committed entries, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 6 commit_index: 6 commit_term: 6 truncated_state { index: 5 term: 5 }, applied_term: 6, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.129 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.130 peer.rs:3657: [DEBG] update read progress, progress: AppliedTerm(6), peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.130 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 6 commit_index: 6 commit_term: 6 truncated_state { index: 5 term: 5 }, applied_term: 6, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.130 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.130 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 6 commit_index: 6 commit_term: 6 truncated_state { index: 5 term: 5 }, applied_term: 6, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.130 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.130 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.131 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppend to: 2 log_term: 6 index: 6 entries { term: 6 index: 7 data: 0A0E08011204080110012A04080110011215080322110A0764656661756C7412026B311A027631 } commit: 6, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.131 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgAppend to: 3 log_term: 6 index: 6 entries { term: 6 index: 7 data: 0A0E08011204080110012A04080110011215080322110A0764656661756C7412026B311A027631 } commit: 6, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.131 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.131 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 61, msg_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.131 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 61, msg_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.131 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppendResponse to: 1 index: 7 commit: 6, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgAppendResponse to: 1 index: 7 commit: 6, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 raft_log.rs:536: [DEBG] persisted index 7, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 1 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.132 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 raft_log.rs:536: [DEBG] persisted index 7, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 raft_log.rs:536: [DEBG] persisted index 7, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 raft_log.rs:500: [DEBG] committing index 7, index: 7, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.133 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.134 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.134 apply.rs:1280: [DEBG] applied command, index: 7, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.134 apply.rs:696: [WARN] [store 1] handle ready 1 committed entries, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.134 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 7 commit_index: 7 commit_term: 6 truncated_state { index: 5 term: 5 }, applied_term: 6, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 5, delete_keys_hint: 0, written_bytes: 47, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.134 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.134 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 2, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 peer.rs:4842: [INFO] propose transfer leader, peer: id: 2 store_id: 2, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeat to: 2 commit: 7, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 7, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.135 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 8, msg_type: MsgTransferLeader, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeatResponse to: 1 commit: 7, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgHeartbeatResponse to: 1 commit: 7, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 apply.rs:1280: [DEBG] applied command, index: 7, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 apply.rs:1280: [DEBG] applied command, index: 7, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 apply.rs:696: [WARN] [store 2] handle ready 1 committed entries, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.136 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgTransferLeader, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 7 commit_index: 7 commit_term: 6 truncated_state { index: 5 term: 5 }, applied_term: 6, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 5, delete_keys_hint: 0, written_bytes: 47, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 7 commit_index: 7 commit_term: 6 truncated_state { index: 5 term: 5 }, applied_term: 6, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 5, delete_keys_hint: 0, written_bytes: 47, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 peer.rs:4842: [INFO] propose transfer leader, peer: id: 2 store_id: 2, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.137 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeat to: 2 commit: 7, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 7, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgTransferLeader, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 8, msg_type: MsgTransferLeader, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.138 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeatResponse to: 1 commit: 7, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 3 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgHeartbeatResponse to: 1 commit: 7, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgTransferLeader, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:4028: [INFO] transfer leader, peer: id: 2 store_id: 2, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgTransferLeader, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 raft.rs:1904: [INFO] [term 6] starts to transfer leadership to 2, lead_transferee: 2, term: 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgTimeoutNow to: 2, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 raft.rs:1917: [INFO] sends MsgTimeoutNow to 2 immediately as 2 already has up-to-date log, lead_transferee: 2, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.139 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgTransferLeader, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 8, msg_type: MsgTimeoutNow, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgTimeoutNow, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 1 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 raft.rs:2341: [INFO] [term 6] received MsgTimeoutNow from 1 and starts an election to get leadership., from: 1, term: 6, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 raft.rs:1550: [INFO] starting a new election, term: 6, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 raft.rs:2789: [DEBG] reset election timeout 30 -> 43 at 0, election_elapsed: 0, timeout: 43, prev_timeout: 30, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 raft.rs:1144: [INFO] became candidate at term 7, term: 7, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.140 peer.rs:4842: [INFO] propose transfer leader, peer: id: 2 store_id: 2, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeat to: 2 commit: 7, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgRequestVote to: 1 term: 7 log_term: 6 index: 7 commit: 7 commit_term: 6 context: 43616D706169676E5472616E73666572, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 7, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgRequestVote to: 3 term: 7 log_term: 6 index: 7 commit: 7 commit_term: 6 context: 43616D706169676E5472616E73666572, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgTransferLeader, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:1299: [INFO] broadcasting vote request, to: [1, 3], log_index: 7, log_term: 6, term: 7, type: MsgRequestVote, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 peer.rs:3239: [INFO] propose transfer leader command, to: id: 2 store_id: 2, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:2021: [DEBG] [term 6] transfer leadership to 2 is in progress; dropping proposal, lead_transferee: 2, term: 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 peer.rs:2415: [DEBG] update leader info, peer_id: 2, term: 7, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeat to: 2 commit: 7, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.141 raft.rs:603: [DEBG] Sending from 1 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 7, to: 3, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 1, msg_size: 36, msg_type: MsgRequestVote, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 3, msg_size: 36, msg_type: MsgRequestVote, peer_id: 2, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgRequestVote, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 raft.rs:1364: [INFO] received a message with higher term from 2, msg type: MsgRequestVote, message_term: 7, term: 6, from: 2, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 raft.rs:2789: [DEBG] reset election timeout 37 -> 28 at 0, election_elapsed: 0, timeout: 28, prev_timeout: 37, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppendResponse to: 1, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 8, msg_type: MsgTransferLeader, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.142 raft.rs:1120: [INFO] became follower at term 7, term: 7, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 raft.rs:1565: [INFO] [logterm: 6, index: 7, vote: 0] cast vote for 2 [logterm: 6, index: 7] at term 7, msg type: MsgRequestVote, term: 7, msg_index: 7, msg_term: 6, from: 2, vote: 0, log_index: 7, log_term: 6, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgRequestVoteResponse to: 2 term: 7, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 5 messages and 0 snapshots, takes: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:2415: [DEBG] update leader info, peer_id: 3, term: 7, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgRequestVote, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.143 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgTransferLeader, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 raft.rs:1364: [INFO] received a message with higher term from 2, msg type: MsgRequestVote, message_term: 7, term: 6, from: 2, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 raft.rs:2789: [DEBG] reset election timeout 35 -> 31 at 1, election_elapsed: 1, timeout: 31, prev_timeout: 35, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 8, msg_type: MsgRequestVoteResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 raft.rs:1120: [INFO] became follower at term 7, term: 7, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 raft.rs:1565: [INFO] [logterm: 6, index: 7, vote: 0] cast vote for 2 [logterm: 6, index: 7] at term 7, msg type: MsgRequestVote, term: 7, msg_index: 7, msg_term: 6, from: 2, vote: 0, log_index: 7, log_term: 6, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgRequestVoteResponse to: 2 term: 7, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppendResponse to: 1, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.144 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgAppendResponse to: 1, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 peer.rs:2415: [DEBG] update leader info, peer_id: 1, term: 7, leader_id: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 1, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 8, msg_type: MsgRequestVoteResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgRequestVoteResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 raft.rs:603: [DEBG] Sending from 3 to 1, msg: msg_type: MsgAppendResponse to: 1, to: 1, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 raft.rs:2212: [INFO] received votes response, term: 7, type: MsgRequestVoteResponse, approvals: 2, rejections: 0, from: 3, vote: true, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.145 cluster.rs:597: [DEBG] failed to detect leaders, store_ids: [1, 2, 3], leaders: {1: (id: 1 store_id: 1, [1])}
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 raft.rs:2789: [DEBG] reset election timeout 43 -> 34 at 0, election_elapsed: 0, timeout: 34, prev_timeout: 43, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 raft.rs:1228: [INFO] became leader at term 7, term: 7, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 8, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 6 index: 7 entries { term: 7 index: 8 } commit: 7, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 6 index: 7 entries { term: 7 index: 8 } commit: 7, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.146 peer.rs:3657: [DEBG] update read progress, progress: Term(7), peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:3657: [DEBG] update read progress, progress: LeaderLease(RemoteLease { expired_time: Timespec { sec: 1766142, nsec: 247463936 }, term: 7 }), peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:2292: [DEBG] becomes leader with lease, lease: Lease { valid: Timespec { sec: 1766142, nsec: 247515125 } }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:5636: [INFO] require updating max ts, initial_status: 30064771074, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 pool.rs:123: [DEBG] scheduling task update the max timestamp for region 1 in the concurrency manager
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:2415: [DEBG] update leader info, peer_id: 2, term: 7, leader_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.147 pd.rs:1815: [DEBG] executing task, task: update the max timestamp for region 1 in the concurrency manager
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 20, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.147 pd.rs:1656: [INFO] succeed to update max timestamp, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 20, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 8 commit: 7, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.147 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 8 commit: 7, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 peer.rs:2137: [DEBG] peer start pending, time: Instant { t: 42387408202639 }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 peer.rs:2137: [DEBG] peer start pending, time: Instant { t: 42387408208062 }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 peer.rs:2415: [DEBG] update leader info, peer_id: 1, term: 7, leader_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 peer.rs:2415: [DEBG] update leader info, peer_id: 3, term: 7, leader_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.148 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 raft_log.rs:536: [DEBG] persisted index 8, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 1 entries, 2 messages and 0 snapshots, takes: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 raft_log.rs:536: [DEBG] persisted index 8, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.148 raft_log.rs:536: [DEBG] persisted index 8, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgRequestVoteResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 raft_log.rs:500: [DEBG] committing index 8, index: 8, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 8 commit: 8, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:2186: [DEBG] peer has caught up logs, takes: 0.001561, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.149 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 8 commit: 8, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:2186: [DEBG] peer has caught up logs, takes: 0.001651833, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.149 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.150 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 8 commit: 8, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 8 commit: 8, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 8 commit_index: 8 commit_term: 7 truncated_state { index: 5 term: 5 }, applied_term: 7, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:3657: [DEBG] update read progress, progress: AppliedTerm(7), peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.150 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 8 commit_index: 8 commit_term: 7 truncated_state { index: 5 term: 5 }, applied_term: 7, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.151 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.151 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.151 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.151 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.151 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 8 commit_index: 8 commit_term: 7 truncated_state { index: 5 term: 5 }, applied_term: 7, exec_res: [], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.155 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.157 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.158 pd.rs:928: [DEBG] [region 1] schedule operator AddPeer { peer: Left(id: 3 store_id: 3 is_witness: true), policy: TillSuccess }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 8, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 8, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.161 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.162 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.162 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.162 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.162 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.166 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.168 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.170 pool.rs:123: [DEBG] scheduling task compute slow score: id 1, duration RaftstoreDuration { store_wait_duration: Some(30.791Âµs), store_process_duration: Some(12.458Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.170 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 1, duration RaftstoreDuration { store_wait_duration: Some(30.791Âµs), store_process_duration: Some(12.458Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 8, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 8, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.184 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.185 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.185 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.185 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.185 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.190 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.190 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.208 pool.rs:123: [DEBG] scheduling task compute slow score: id 1, duration RaftstoreDuration { store_wait_duration: Some(39.75Âµs), store_process_duration: Some(20.25Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.208 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 1, duration RaftstoreDuration { store_wait_duration: Some(39.75Âµs), store_process_duration: Some(20.25Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 8, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 8, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:2319: [DEBG] renew lease, reason: tick, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.209 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.210 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.210 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.210 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.210 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.211 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.212 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.232 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 8, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.232 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 8, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.232 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.232 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.232 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 8, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.233 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.234 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.234 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.244 pool.rs:123: [DEBG] scheduling task compute slow score: id 1, duration RaftstoreDuration { store_wait_duration: Some(60.125Âµs), store_process_duration: Some(28.417Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.244 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 1, duration RaftstoreDuration { store_wait_duration: Some(60.125Âµs), store_process_duration: Some(28.417Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.249 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.249 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.249 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 is_witness: true), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.249 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 is_witness: true }], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.249 peer.rs:4936: [INFO] propose conf change peer, kind: Simple, changes: [peer { id: 3 store_id: 3 is_witness: true }], peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 8 entries { entry_type: EntryConfChangeV2 term: 7 index: 9 data: 120210031A200A0E08011204080210022A04080110011A0E080B5A0A0A081206080310032001 context: 01 } commit: 8, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 8 entries { entry_type: EntryConfChangeV2 term: 7 index: 9 data: 120210031A200A0E08011204080210022A04080110011A0E080B5A0A0A081206080310032001 context: 01 } commit: 8, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 65, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 65, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.250 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 9 commit: 8, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 9 commit: 8, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 raft_log.rs:536: [DEBG] persisted index 9, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 1 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.251 raft_log.rs:536: [DEBG] persisted index 9, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 raft_log.rs:536: [DEBG] persisted index 9, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 raft_log.rs:500: [DEBG] committing index 9, index: 9, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 9 commit: 9, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 9 commit: 9, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.252 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 9 commit: 9, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 apply.rs:1559: [INFO] execute admin command, command: cmd_type: ChangePeerV2 change_peer_v2 { changes { peer { id: 3 store_id: 3 is_witness: true } } }, index: 9, term: 7, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 9 commit: 9, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 apply.rs:2117: [INFO] exec ConfChangeV2, epoch: conf_ver: 1 version: 1, kind: Simple, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 apply.rs:1559: [INFO] execute admin command, command: cmd_type: ChangePeerV2 change_peer_v2 { changes { peer { id: 3 store_id: 3 is_witness: true } } }, index: 9, term: 7, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 apply.rs:1559: [INFO] execute admin command, command: cmd_type: ChangePeerV2 change_peer_v2 { changes { peer { id: 3 store_id: 3 is_witness: true } } }, index: 9, term: 7, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.253 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:2117: [INFO] exec ConfChangeV2, epoch: conf_ver: 1 version: 1, kind: Simple, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:2117: [INFO] exec ConfChangeV2, epoch: conf_ver: 1 version: 1, kind: Simple, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:2320: [INFO] conf change successfully, current region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, original region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, changes: [peer { id: 3 store_id: 3 is_witness: true }], peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:2320: [INFO] conf change successfully, current region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, original region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, changes: [peer { id: 3 store_id: 3 is_witness: true }], peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:2320: [INFO] conf change successfully, current region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, original region: id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }, changes: [peer { id: 3 store_id: 3 is_witness: true }], peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 peer_storage.rs:1147: [DEBG] writing merge state, state: region { id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true } }, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 peer_storage.rs:1147: [DEBG] writing merge state, state: region { id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true } }, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 peer_storage.rs:1147: [DEBG] writing merge state, state: region { id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true } }, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:1280: [DEBG] applied command, index: 9, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.254 apply.rs:1280: [DEBG] applied command, index: 9, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.255 apply.rs:1280: [DEBG] applied command, index: 9, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.255 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 9, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.292 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 9, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.292 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.292 apply.rs:696: [WARN] [store 3] handle ready 1 committed entries, takes: 19
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.292 apply.rs:696: [WARN] [store 1] handle ready 1 committed entries, takes: 39
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.292 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.310 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.310 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 9 commit_index: 9 commit_term: 7 truncated_state { index: 5 term: 5 }, applied_term: 7, exec_res: [ChangePeer(ChangePeer { index: 9, conf_change: changes { node_id: 3 } context: 0A0E08011204080210022A04080110011A0E080B5A0A0A081206080310032001, changes: [peer { id: 3 store_id: 3 is_witness: true }], region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true } })], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 84, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.310 apply.rs:696: [WARN] [store 2] handle ready 1 committed entries, takes: 57
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.311 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 9 commit_index: 9 commit_term: 7 truncated_state { index: 5 term: 5 }, applied_term: 7, exec_res: [ChangePeer(ChangePeer { index: 9, conf_change: changes { node_id: 3 } context: 0A0E08011204080210022A04080110011A0E080B5A0A0A081206080310032001, changes: [peer { id: 3 store_id: 3 is_witness: true }], region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true } })], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 84, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.311 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.311 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.311 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.311 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 peer.rs:3657: [DEBG] update read progress, progress: Region(id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }), peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 peer.rs:3657: [DEBG] update read progress, progress: Region(id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }), peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 56
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 pool.rs:123: [DEBG] scheduling task Destroy 1 [7A, 7B)
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 peer.rs:2319: [DEBG] renew lease, reason: tick, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 9 commit_index: 9 commit_term: 7 truncated_state { index: 5 term: 5 }, applied_term: 7, exec_res: [ChangePeer(ChangePeer { index: 9, conf_change: changes { node_id: 3 } context: 0A0E08011204080210022A04080110011A0E080B5A0A0A081206080310032001, changes: [peer { id: 3 store_id: 3 is_witness: true }], region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true } })], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 84, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.312 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2, 3} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.313 region.rs:602: [INFO] register deleting data in range, end_key: 7B, start_key: 7A, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.313 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.313 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 9, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.313 region.rs:636: [INFO] delete data in range because of stale, end_key: 7B, start_key: 7A, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.313 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 9, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.313 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.313 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.314 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.314 peer.rs:3657: [DEBG] update read progress, progress: Region(id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }), peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.314 peer.rs:3778: [INFO] notify pd with change peer region, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.332 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.332 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.332 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.332 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 20
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.332 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 9, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 9, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.333 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.333 pd.rs:642: [DEBG] region changed, leader: id: 2 store_id: 2, to: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, from: [id: 1 region_epoch { conf_ver: 1 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 }]
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.333 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 9, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 9, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 21
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.334 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 9 entries { term: 7 index: 10 data: 0A0808011204080210021A080803220408081007 } commit: 9, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 9 entries { term: 7 index: 10 data: 0A0808011204080210021A080803220408081007 } commit: 9, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 10 commit: 9, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 peer.rs:2186: [DEBG] peer has caught up logs, takes: 0.021140291, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.335 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 42, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.335 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 42, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 10 commit: 9, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.336 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 10 commit: 9, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 raft_log.rs:536: [DEBG] persisted index 10, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 raft_log.rs:536: [DEBG] persisted index 10, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 1 entries, 3 messages and 0 snapshots, takes: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 10 commit: 9, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.337 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 10 commit: 9, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 raft_log.rs:536: [DEBG] persisted index 10, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 raft_log.rs:500: [DEBG] committing index 10, index: 10, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 10 commit: 9, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.338 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 apply.rs:3081: [DEBG] [region 1] 2 compact log entries to prior to 8
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 10 commit: 9, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 apply.rs:1280: [DEBG] applied command, index: 10, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 10 commit: 9, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.339 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 apply.rs:696: [WARN] [store 2] handle ready 1 committed entries, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 10 commit_index: 10 commit_term: 7 truncated_state { index: 8 term: 7 }, applied_term: 7, exec_res: [CompactLog { state: index: 8 term: 7, first_index: 6 }], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 peer.rs:2503: [DEBG] scheduling raft log gc task, task: GC Raft Logs [region: 1, from: 0, to: 9, has_cb: false], peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.340 pool.rs:123: [DEBG] scheduling task GC Raft Logs [region: 1, from: 0, to: 9, has_cb: false]
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.341 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.341 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.345 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.345 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 10, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 10, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.348 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 apply.rs:3081: [DEBG] [region 1] 1 compact log entries to prior to 8
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 apply.rs:1280: [DEBG] applied command, index: 10, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 apply.rs:3081: [DEBG] [region 1] 3 compact log entries to prior to 8
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 apply.rs:1280: [DEBG] applied command, index: 10, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.349 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 10 commit_index: 10 commit_term: 7 truncated_state { index: 8 term: 7 }, applied_term: 7, exec_res: [CompactLog { state: index: 8 term: 7, first_index: 6 }], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.350 peer.rs:2503: [DEBG] scheduling raft log gc task, task: GC Raft Logs [region: 1, from: 0, to: 9, has_cb: false], peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.350 pool.rs:123: [DEBG] scheduling task GC Raft Logs [region: 1, from: 0, to: 9, has_cb: false]
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.350 apply.rs:696: [WARN] [store 3] handle ready 1 committed entries, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.350 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 10 commit_index: 10 commit_term: 7 truncated_state { index: 8 term: 7 }, applied_term: 7, exec_res: [CompactLog { state: index: 8 term: 7, first_index: 6 }], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 39, written_keys: 1, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.350 peer.rs:2503: [DEBG] scheduling raft log gc task, task: GC Raft Logs [region: 1, from: 0, to: 9, has_cb: false], peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.350 pool.rs:123: [DEBG] scheduling task GC Raft Logs [region: 1, from: 0, to: 9, has_cb: false]
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.352 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.352 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.356 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.356 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.370 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 10, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.370 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 10, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.370 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.370 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.371 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.372 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.372 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.380 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.380 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.393 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 10, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 10, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:2319: [DEBG] renew lease, reason: tick, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.394 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.395 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.395 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.395 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.395 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.395 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.395 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.404 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.405 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 10, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 10, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.418 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.419 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.419 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.419 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.419 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.419 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.431 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.431 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 10, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 10, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.442 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 10, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.443 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.446 pd.rs:928: [DEBG] [region 1] schedule operator AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.455 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.455 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.455 peer.rs:2319: [DEBG] renew lease, reason: tick, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.461 pool.rs:123: [DEBG] scheduling task heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.461 pd.rs:1815: [DEBG] executing task, task: heartbeat for region id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, leader 2, replication status None
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.462 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.462 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.462 peer.rs:4936: [INFO] propose conf change peer, kind: Simple, changes: [change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner }], peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.462 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 10 entries { entry_type: EntryConfChangeV2 term: 7 index: 11 data: 1204080210031A220A0E08011204080210022A04080210011A10080B5A0C0A0A08021206080310031801 context: 01 } commit: 10, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.462 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 10 entries { entry_type: EntryConfChangeV2 term: 7 index: 11 data: 1204080210031A220A0E08011204080210022A04080210011A10080B5A0C0A0A08021206080310031801 context: 01 } commit: 10, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.462 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.462 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 69, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 69, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 11 commit: 10, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.463 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 11 commit: 10, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 raft_log.rs:536: [DEBG] persisted index 11, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 entry_storage.rs:960: [DEBG] append entries, count: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 1 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 raft_log.rs:500: [DEBG] committing index 11, index: 11, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.464 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgAppend to: 1 log_term: 7 index: 11 commit: 11, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgAppend to: 3 log_term: 7 index: 11 commit: 11, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 raft_log.rs:536: [DEBG] persisted index 11, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 raft_log.rs:536: [DEBG] persisted index 11, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 1 entries, 0 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 14, msg_type: MsgAppend, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgAppend, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.465 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 11 commit: 11, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 apply.rs:1559: [INFO] execute admin command, command: cmd_type: ChangePeerV2 change_peer_v2 { changes { change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner } } }, index: 11, term: 7, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgAppend, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 apply.rs:2117: [INFO] exec ConfChangeV2, epoch: conf_ver: 2 version: 1, kind: Simple, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 11 commit: 11, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 apply.rs:1559: [INFO] execute admin command, command: cmd_type: ChangePeerV2 change_peer_v2 { changes { change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner } } }, index: 11, term: 7, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.466 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 1, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 11, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 apply.rs:2117: [INFO] exec ConfChangeV2, epoch: conf_ver: 2 version: 1, kind: Simple, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 11, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 apply.rs:1559: [INFO] execute admin command, command: cmd_type: ChangePeerV2 change_peer_v2 { changes { change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner } } }, index: 11, term: 7, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 apply.rs:2320: [INFO] conf change successfully, current region: id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner }, original region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, changes: [change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner }], peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 write.rs:758: [DEBG] send raft msg in write thread, disk_usage: Normal, to: 2, msg_size: 12, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1, tag: sync-writer
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.467 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 apply.rs:2117: [INFO] exec ConfChangeV2, epoch: conf_ver: 2 version: 1, kind: Simple, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 peer_storage.rs:1147: [DEBG] writing merge state, state: region { id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner } }, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 apply.rs:2320: [INFO] conf change successfully, current region: id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner }, original region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, changes: [change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner }], peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 apply.rs:1280: [DEBG] applied command, index: 11, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.468 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.469 peer_storage.rs:1147: [DEBG] writing merge state, state: state: Unavailable region { id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner } }, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.469 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.486 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 1 ready, 0 entries, 2 messages and 0 snapshots, takes: 2
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.487 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 11, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.487 apply.rs:1280: [DEBG] applied command, index: 11, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.487 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 11, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.487 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.487 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.488 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.488 apply.rs:696: [WARN] [store 1] handle ready 1 committed entries, takes: 20
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.488 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.488 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.505 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 19
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 apply.rs:696: [WARN] [store 3] handle ready 1 committed entries, takes: 39
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 0 ready, 0 entries, 0 messages and 0 snapshots, takes: 18
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 store.rs:1026: [WARN] [store 1] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 37
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.506 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 11 commit_index: 11 commit_term: 7 truncated_state { index: 8 term: 7 }, applied_term: 7, exec_res: [ChangePeer(ChangePeer { index: 11, conf_change: changes { change_type: AddLearnerNode node_id: 3 } context: 0A0E08011204080210022A04080210011A10080B5A0C0A0A08021206080310031801, changes: [change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner }], region: id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner } })], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 84, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.507 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.507 peer.rs:2227: [DEBG] async apply finish, res: ApplyRes { region_id: 1, apply_state: applied_index: 11 commit_index: 11 commit_term: 7 truncated_state { index: 8 term: 7 }, applied_term: 7, exec_res: [ChangePeer(ChangePeer { index: 11, conf_change: changes { change_type: AddLearnerNode node_id: 3 } context: 0A0E08011204080210022A04080210011A10080B5A0C0A0A08021206080310031801, changes: [change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner }], region: id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner } })], metrics: ApplyMetrics { size_diff_hint: 0, delete_keys_hint: 0, written_bytes: 86, written_keys: 2, lock_cf_written_bytes: 0 }, bucket_stat: None, write_seqno: [] }, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.507 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2} }, outgoing: Configuration { voters: {} } }, learners: {3}, learners_next: {}, auto_leave: false }, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.507 store.rs:1026: [WARN] [store 2] handle 1 pending peers include 0 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.508 raft.rs:2646: [INFO] switched to configuration, config: Configuration { voters: Configuration { incoming: Configuration { voters: {1, 2} }, outgoing: Configuration { voters: {} } }, learners: {3}, learners_next: {}, auto_leave: false }, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.508 peer.rs:3657: [DEBG] update read progress, progress: Region(id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner }), peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.508 peer.rs:3657: [DEBG] update read progress, progress: Region(id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner }), peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.508 peer.rs:3701: [INFO] [region 1] 3 requests snapshot to make the new non-witness peer available
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.508 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 11 request_snapshot: 9 reject: true reject_hint: 11, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.518 raft.rs:603: [DEBG] Sending from 2 to 1, msg: msg_type: MsgHeartbeat to: 1 commit: 11, to: 1, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.518 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgHeartbeat to: 3 commit: 11, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.518 peer.rs:2319: [DEBG] renew lease, reason: tick, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.518 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.518 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 1, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 10, msg_type: MsgHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 1, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 3, from_peer_id: 2, message_type: MsgHeartbeat, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 raft.rs:603: [DEBG] Sending from 3 to 2, msg: msg_type: MsgAppendResponse to: 2 index: 11 request_snapshot: 9 reject: true reject_hint: 11, to: 2, from: 3, raft_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 raft.rs:603: [DEBG] Sending from 1 to 2, msg: msg_type: MsgHeartbeatResponse to: 2 commit: 11, to: 2, from: 1, raft_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:2738: [DEBG] handle raft ready, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:2738: [DEBG] handle raft ready, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 10, msg_type: MsgHeartbeatResponse, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.519 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 16, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 1, message_type: MsgHeartbeatResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 2, msg_size: 16, msg_type: MsgAppendResponse, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 peer.rs:2415: [DEBG] handle raft message, to_peer_id: 2, from_peer_id: 3, message_type: MsgAppendResponse, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 raft.rs:1737: [DEBG] received msgAppend rejection, index: 11, from: 3, reject_hint_term: 0, reject_hint_index: 11, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 raft.rs:1747: [DEBG] decreased progress of 3, progress: Progress { matched: 11, next_idx: 12, state: Replicate, paused: false, pending_snapshot: 0, pending_request_snapshot: 9, recent_active: true, ins: Inflights { start: 3, count: 0, buffer: [9, 10, 11], cap: 256, incoming_cap: None }, commit_group_id: 0, committed_index: 11 }, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 store.rs:1026: [WARN] [store 3] handle 1 pending peers include 1 ready, 0 entries, 0 messages and 0 snapshots, takes: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.520 raft.rs:694: [DEBG] [firstindex: 9, commit: 11] sent snapshot[index: 10, term: 7] to 3, progress: Progress { matched: 11, next_idx: 12, state: Probe, paused: false, pending_snapshot: 0, pending_request_snapshot: 9, recent_active: true, ins: Inflights { start: 0, count: 0, buffer: [], cap: 256, incoming_cap: None }, commit_group_id: 0, committed_index: 11 }, to: 3, snapshot_term: 7, snapshot_index: 10, committed: 11, first_index: 9, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.521 raft.rs:705: [DEBG] paused sending replication messages to 3, progress: Progress { matched: 11, next_idx: 12, state: Snapshot, paused: false, pending_snapshot: 10, pending_request_snapshot: 9, recent_active: true, ins: Inflights { start: 0, count: 0, buffer: [], cap: 256, incoming_cap: None }, commit_group_id: 0, committed_index: 11 }, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.521 raft.rs:603: [DEBG] Sending from 2 to 3, msg: msg_type: MsgSnapshot to: 3 snapshot { data: 0A1C08012204080210012A04080110012A04080210022A0608031003200120022A021801 metadata { conf_state { voters: 1 voters: 2 voters: 3 } index: 10 term: 7 } }, to: 3, from: 2, raft_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.521 peer.rs:2738: [DEBG] handle raft ready, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.521 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 3, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.521 peer.rs:1836: [DEBG] send raft msg, disk_usage: Normal, to: 3, msg_size: 62, msg_type: MsgSnapshot, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.521 snap.rs:1657: [DEBG] register snapshot, entry: Sending, key: 1_7_10
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.522 snap.rs:1657: [DEBG] register snapshot, entry: Receiving, key: 1_7_10
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.522 snap.rs:669: [INFO] set_snapshot_meta total cf files count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.531 peer.rs:2027: [DEBG] failed to schedule peer tick, err: sending on a disconnected channel, tick: Raft, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.531 peer.rs:2142: [DEBG] stop ticking, election_elapsed: 1, peer_id: 1, region_id: 1, res: Some(CheckTickResult { leader: false, up_to_date: false, reason: "" })
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.539 peer.rs:2027: [DEBG] failed to schedule peer tick, err: sending on a disconnected channel, tick: RaftLogGc, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.563 peer.rs:2027: [DEBG] failed to schedule peer tick, err: sending on a disconnected channel, tick: PdHeartbeat, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.571 apply.rs:2320: [INFO] conf change successfully, current region: id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner }, original region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }, changes: [change_type: AddLearnerNode peer { id: 3 store_id: 3 role: Learner }], peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.571 peer_storage.rs:1147: [DEBG] writing merge state, state: region { id: 1 region_epoch { conf_ver: 3 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 role: Learner } }, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.572 apply.rs:1280: [DEBG] applied command, index: 11, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.580 peer.rs:2027: [DEBG] failed to schedule peer tick, err: sending on a disconnected channel, tick: CheckLeaderLease, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.592 store.rs:303: [ERRO] failed to send apply result, err: "SendError(..)", region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.592 apply.rs:696: [WARN] [store 2] handle ready 1 committed entries, takes: 126
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.650 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.650 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.650 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.673 pool.rs:123: [DEBG] scheduling task get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.674 pd.rs:1815: [DEBG] executing task, task: get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.674 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.674 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.674 pool.rs:123: [DEBG] scheduling task compute slow score: id 2, duration RaftstoreDuration { store_wait_duration: Some(74.042Âµs), store_process_duration: Some(25.041Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.674 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.674 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.675 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 2, duration RaftstoreDuration { store_wait_duration: Some(74.042Âµs), store_process_duration: Some(25.041Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.675 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.708 peer.rs:2027: [DEBG] failed to schedule peer tick, err: sending on a disconnected channel, tick: CheckPeerStaleState, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.708 pool.rs:123: [DEBG] scheduling task get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.708 pd.rs:1815: [DEBG] executing task, task: get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.708 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.708 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.708 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.709 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.709 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.745 pool.rs:123: [DEBG] scheduling task compute slow score: id 2, duration RaftstoreDuration { store_wait_duration: Some(55.209Âµs), store_process_duration: Some(32.375Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.746 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 2, duration RaftstoreDuration { store_wait_duration: Some(55.209Âµs), store_process_duration: Some(32.375Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.749 pool.rs:123: [DEBG] scheduling task get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.749 pd.rs:1815: [DEBG] executing task, task: get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.749 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.750 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.750 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.750 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:49.750 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.794 peer.rs:2097: [DEBG] follower hibernates, missing_ticks: 21, election_elapsed: 1, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:49.806 peer.rs:2097: [DEBG] follower hibernates, missing_ticks: 21, election_elapsed: 1, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.130 peer.rs:2027: [DEBG] failed to schedule peer tick, err: sending on a disconnected channel, tick: EntryCacheEvict, peer_id: 2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.154 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.154 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.155 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.178 pool.rs:123: [DEBG] scheduling task compute slow score: id 3, duration RaftstoreDuration { store_wait_duration: Some(99.625Âµs), store_process_duration: Some(63.5Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.178 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 3, duration RaftstoreDuration { store_wait_duration: Some(99.625Âµs), store_process_duration: Some(63.5Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.248 pool.rs:123: [DEBG] scheduling task compute slow score: id 3, duration RaftstoreDuration { store_wait_duration: Some(158.125Âµs), store_process_duration: Some(52Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.248 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 3, duration RaftstoreDuration { store_wait_duration: Some(158.125Âµs), store_process_duration: Some(52Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.656 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-1 2022/10/21 18:04:50.676 raftlog_gc.rs:122: [DEBG] gc raft log, end_index: 9, start_index: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.676 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.676 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-1 2022/10/21 18:04:50.676 raftlog_gc.rs:154: [DEBG] gc log entries, entry_count: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.678 pool.rs:123: [DEBG] scheduling task compute slow score: id 4, duration RaftstoreDuration { store_wait_duration: Some(59.5Âµs), store_process_duration: Some(29.5Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.679 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 4, duration RaftstoreDuration { store_wait_duration: Some(59.5Âµs), store_process_duration: Some(29.5Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.680 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.680 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.680 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.680 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.680 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.714 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.727 raftlog_gc.rs:122: [DEBG] gc raft log, end_index: 9, start_index: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.727 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.728 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.728 raftlog_gc.rs:154: [DEBG] gc log entries, entry_count: 3
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.728 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.728 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.748 pool.rs:123: [DEBG] scheduling task compute slow score: id 4, duration RaftstoreDuration { store_wait_duration: Some(66.208Âµs), store_process_duration: Some(37.208Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.761 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.762 raftlog_gc.rs:122: [DEBG] gc raft log, end_index: 9, start_index: 0, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.762 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 4, duration RaftstoreDuration { store_wait_duration: Some(66.208Âµs), store_process_duration: Some(37.208Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.762 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.762 raftlog_gc.rs:154: [DEBG] gc log entries, entry_count: 3
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:50.763 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.763 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:50.763 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.182 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.183 pool.rs:123: [DEBG] scheduling task compute slow score: id 5, duration RaftstoreDuration { store_wait_duration: Some(203.791Âµs), store_process_duration: Some(62.167Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.183 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.183 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 5, duration RaftstoreDuration { store_wait_duration: Some(203.791Âµs), store_process_duration: Some(62.167Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.184 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.251 pool.rs:123: [DEBG] scheduling task compute slow score: id 5, duration RaftstoreDuration { store_wait_duration: Some(83.083Âµs), store_process_duration: Some(47.834Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.252 pd.rs:1815: [DEBG] executing task, task: compute slow score: id 5, duration RaftstoreDuration { store_wait_duration: Some(83.083Âµs), store_process_duration: Some(47.834Âµs), store_write_duration: None, apply_wait_duration: None, apply_process_duration: None }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.677 peer.rs:6126: [WARN] leader missing longer than max_leader_missing_duration. To check with pd and other peers whether it's still valid, expect: 2s, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.678 peer.rs:5483: [DEBG] send extra msg, to: 2, msg_type: MsgCheckStalePeer, peer_id: 1, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.685 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.685 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.686 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.686 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.686 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.687 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.687 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.688 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.733 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.733 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.733 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.733 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.733 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.751 peer.rs:6126: [WARN] leader missing longer than max_leader_missing_duration. To check with pd and other peers whether it's still valid, expect: 2s, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.751 peer.rs:5483: [DEBG] send extra msg, to: 1, msg_type: MsgCheckStalePeer, peer_id: 3, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.764 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.765 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:51.765 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.765 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:51.765 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.191 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.192 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.192 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.691 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.691 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.691 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.692 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.692 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.693 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.693 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.694 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.738 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.739 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.739 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.740 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.740 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.770 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.770 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.770 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:52.770 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:52.771 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.198 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.199 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.200 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.695 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.695 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.696 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.696 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.696 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.701 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.702 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.702 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.742 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.742 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.743 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.743 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.743 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.776 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.776 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.776 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:53.777 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:53.777 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.207 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.208 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.208 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.701 pool.rs:123: [DEBG] scheduling task get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.701 pd.rs:1815: [DEBG] executing task, task: get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.701 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.701 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.701 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.701 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.701 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 1, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.709 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.710 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.710 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.747 pool.rs:123: [DEBG] scheduling task get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.747 pd.rs:1815: [DEBG] executing task, task: get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.748 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.748 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.748 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.748 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.748 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 2, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.780 pool.rs:123: [DEBG] scheduling task get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.780 split_controller.rs:769: [DEBG] flush to load base split, is_unified_read_pool_busy: false, is_grpc_poll_busy: false, unified_read_pool_thread_usage: 0, max_unified_read_pool_thread_count: 0, avg_grpc_thread_usage: 0, grpc_thread_usage: 0, max_grpc_thread_count: 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.781 pd.rs:1815: [DEBG] executing task, task: get store's information: cpu_usages [], read_io_rates [], write_io_rates []
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.781 pool.rs:123: [DEBG] scheduling task auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:54.781 pool.rs:123: [DEBG] scheduling task report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.782 pd.rs:1815: [DEBG] executing task, task: auto split split regions, num is 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:54.782 pd.rs:1815: [DEBG] executing task, task: report min resolved ts: store 3, resolved ts 0
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:55.210 pd.rs:741: [DEBG] [region 1] schedule AddPeer { peer: Left(id: 3 store_id: 3 role: Learner), policy: TillSuccess } to id: 2 store_id: 2, region: id: 1 region_epoch { conf_ver: 2 version: 1 } peers { id: 1 store_id: 1 } peers { id: 2 store_id: 2 } peers { id: 3 store_id: 3 is_witness: true }
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:55.211 pd.rs:1463: [INFO] try to change peer, changes: [peer { id: 3 store_id: 3 role: Learner } change_type: AddLearnerNode], region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change-0 2022/10/21 18:04:55.211 pd.rs:2222: [ERRO] send request failed, err: "Disconnected(..)", cmd_type: ChangePeerV2, region_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.457 cluster.rs:770: [DEBG] about to shutdown cluster
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.457 cluster.rs:369: [DEBG] stopping node 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.457 node.rs:548: [INFO] stop raft store thread, store_id: 1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.458 batch.rs:635: [INFO] shutdown batch system apply
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.458 router.rs:317: [INFO] broadcasting shutdown
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.458 router.rs:322: [DEBG] [region 1] shutdown mailbox
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.459 batch.rs:639: [DEBG] waiting for apply-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.459 batch.rs:639: [DEBG] waiting for apply-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.459 batch.rs:648: [INFO] batch system apply is stopped.
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 batch.rs:635: [INFO] shutdown batch system raftstore-1
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 router.rs:317: [INFO] broadcasting shutdown
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 router.rs:322: [DEBG] [region 1] shutdown mailbox
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 batch.rs:639: [DEBG] waiting for raftstore-1-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 batch.rs:641: [ERRO] failed to join worker thread: Any { .. }
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 batch.rs:639: [DEBG] waiting for raftstore-1-low-0::test_request_snapshot_before_leader_finish_apply_conf_change
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.460 batch.rs:646: [ERRO] failed to join worker thread: Any { .. }, double panic prevented
test_request_snapshot_before_leader_finish_apply_conf_change 2022/10/21 18:04:55.461 batch.rs:648: [INFO] batch system raftstore-1 is stopped.
